<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Pitch Bookings</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__title">Pitch Bookings</div>
    </div>

    <div class="datebar">
      <label for="dateInput" class="sr-only">Select date</label>
      <input id="dateInput" type="date" />
      <div id="dateHint" class="hint"></div>
    </div>

    <div class="actions">
      <span id="authPill" class="pill pill--off">Public</span>
      <button id="manageBtn" class="btn btn--ghost hidden" type="button">Manage</button>
      <button id="loginBtn" class="btn btn--primary" type="button">Admin Login</button>
      <button id="logoutBtn" class="btn btn--ghost hidden" type="button">Logout</button>
    </div>
  </header>

  <main class="container">
    <div id="statusBar" class="statusbar"></div>

    <section class="card">
      <div class="card__header">
        <div class="legend">
          <span class="legend__item"><span class="chip chip--available"></span> Available</span>
          <span class="legend__item"><span class="chip chip--booked"></span> Booked</span>
          <span class="legend__item"><span class="chip chip--blocked"></span> Blocked</span>
        </div>
        <div class="smallnote">
          Current Pitches & Timeslots Below
        </div>
      </div>

      <div class="tablewrap">
        <table id="scheduleTable" class="schedule" aria-label="Pitch schedule table"></table>
      </div>
    </section>
  </main>

  <!-- Login Modal -->
  <div id="loginModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
    <div class="modal__panel">
      <div class="modal__header">
        <h2 id="loginTitle">Admin Login</h2>
        <button class="iconbtn" id="loginClose" aria-label="Close login">×</button>
      </div>

      <form id="loginForm" class="form">
        <label for="passwordInput">Password</label>
        <input id="passwordInput" type="password" autocomplete="current-password" required />
        <div id="loginError" class="error hidden"></div>
        <button class="btn btn--primary" type="submit">Login</button>
      </form>

      <div class="modal__footer">
        <div class="hint">Editing Locked - Firebase</div>
      </div>
    </div>
  </div>

  <!-- Cell Edit Modal -->
  <div id="cellModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="cellTitle">
    <div class="modal__panel">
      <div class="modal__header">
        <h2 id="cellTitle">Edit Booking</h2>
        <button class="iconbtn" id="cellClose" aria-label="Close editor">×</button>
      </div>

      <div class="form">
        <div class="kv">
          <div class="kv__k">Date</div><div class="kv__v" id="cellDate"></div>
          <div class="kv__k">Pitch</div><div class="kv__v" id="cellPitch"></div>
          <div class="kv__k">Time</div><div class="kv__v" id="cellSlot"></div>
        </div>

        <label for="cellStatus">Status</label>
        <select id="cellStatus">
          <option value="available">Available</option>
          <option value="booked">Booked</option>
          <option value="blocked">Blocked</option>
        </select>

        <label for="cellNotes">Enter Team - Max Characters: 200</label>
        <textarea id="cellNotes" rows="3" maxlength="200"></textarea>

        <div id="cellError" class="error hidden"></div>

        <div class="row row--end">
          <button id="cellDelete" class="btn btn--danger" type="button">Clear Entry</button>
          <button id="cellSave" class="btn btn--primary" type="button">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Manage Modal -->
  <div id="manageModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="manageTitle">
    <div class="modal__panel modal__panel--wide">
      <div class="modal__header">
        <h2 id="manageTitle">Manage Pitches & Timeslots</h2>
        <button class="iconbtn" id="manageClose" aria-label="Close manage">×</button>
      </div>

      <div class="grid2">
        <section class="subcard">
          <h3>Pitches (Columns)</h3>
          <div id="pitchesList" class="list"></div>

          <div class="row">
            <input id="newPitchName" type="text" placeholder="e.g., Pitch 4" />
            <button id="addPitchBtn" class="btn btn--ghost" type="button">Add</button>
          </div>
          <div class="hint">Use “Hidden” to hide a pitch from public view. Admin still sees it.</div>
        </section>

        <section class="subcard">
          <h3>Timeslots (Rows)</h3>
          <div id="slotsList" class="list"></div>

          <div class="row">
            <input id="newSlot" type="text" placeholder="e.g., 09:00 or 21:30" />
            <button id="addSlotBtn" class="btn btn--ghost" type="button">Add</button>
          </div>
          <div class="hint">Format: HH:MM (24-hour). Example: 10:00</div>
        </section>

        <!-- Bulk apply now lives INSIDE grid2 and spans full width -->
        <section class="subcard grid-span-2">
          <h3>Bulk Apply (Selected Pitch, All Times)</h3>
          <div class="form form--tight">
            <div class="row row--wrap">
              <div class="field">
                <label for="bulkPitch">Pitch</label>
                <select id="bulkPitch"></select>
              </div>

              <div class="field">
                <label for="bulkStart">Start date</label>
                <input id="bulkStart" type="date" />
              </div>

              <div class="field">
                <label for="bulkEnd">End date</label>
                <input id="bulkEnd" type="date" />
              </div>

              <div class="field">
                <label for="bulkStatus">Status</label>
                <select id="bulkStatus">
                  <option value="available">Available</option>
                  <option value="booked">Booked</option>
                  <option value="blocked">Blocked</option>
                </select>
              </div>
            </div>

            <div class="row row--wrap">
              <button id="bulkApplyBtn" class="btn btn--primary" type="button">Apply to all times</button>
              <div id="bulkProgress" class="hint"></div>
            </div>

            <div class="hint">
              Notes are not set by bulk apply. Choosing “Available” will clear any existing entries in the range (reverting to default availability).
            </div>
          </div>
        </section>

        <!-- Error sits inside the same padded grid area -->
        <div id="manageError" class="error hidden grid-span-2"></div>

      </div>

      <!-- Footer bar is padded and button is full width -->
      <div class="manage-footer">

        <button id="manageSave" class="btn btn--primary btn--full" type="button">Save Changes</button>
        
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
